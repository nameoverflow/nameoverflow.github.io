<!DOCTYPE html>
<html lang="ch-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Alpha</title>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">
  <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css'><!-- hexo-inject:end -->
</head>

<body>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="Shell">
    <aside class='SideBar'>
    <section class='avatar'>
        <div class='av-pic'/>
    </section>
    <section class='menu'>
        <div>nameoverflow</div>
        <div>What the f__k?</div>
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
            <a href="/tags/" class="Btn">
              <li>Tags</li>
            </a>  
          
            <a href="/about/" class="Btn">
              <li>About</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
            
                <a href="https://github.com/nameoverflow">
                    <img src="/assets/github.svg" />
                </a>
            
        
            
                <a href="https://www.facebook.com/profile.php?id=100004252391322">
                    <img src="/assets/facebook.svg" />
                </a>
            
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <ul class="Index">
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2017/03/03/使用-Parsec-处理左递归/">使用 Parsec 处理左递归</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2017-03-03T12:41:36.000Z" itemprop="datePublished">
    2017-03-03
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/haskell/">haskell</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/parsec/">parsec</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/compiler/">compiler</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>在给之前写的 Lisp 解释器之前套上表达式语法时，遇到这样几条文法</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mi>E</mi><mi>x</mi><mi>p</mi><mi>r</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>→</mo><mi>F</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>r</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr><mtr><mtd><mrow><mi>E</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>s</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>→</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>r</mi><mo separator="true">,</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>s</mi></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr><mtr><mtd><mrow><mi>F</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>r</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>→</mo><mi>I</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>g</mi><mi>e</mi><mi>r</mi><mi mathvariant="normal">∣</mi><mi>A</mi><mi>p</mi><mi>p</mi><mi>l</mi><mi>y</mi><mi mathvariant="normal">∣</mi><mi>I</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>f</mi><mi>y</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">∣</mi><mrow><mo>(</mo></mrow><mrow><mi>E</mi><mi>x</mi><mi>p</mi><mi>r</mi></mrow><mrow><mo>)</mo></mrow></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr><mtr><mtd><mrow><mi>I</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>g</mi><mi>e</mi><mi>r</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>→</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr><mtr><mtd><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr><mtr><mtd><mrow><mi>A</mi><mi>p</mi><mi>p</mi><mi>l</mi><mi>y</mi></mrow></mtd><mtd><mrow><mrow></mrow><mo>→</mo><mi>F</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>r</mi><mo>(</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>s</mi><mo>)</mo></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned}
Expr &amp; \rightarrow Factor ... \\\\
Exprs &amp; \rightarrow Expr  ,  Exprs\\\\
 Factor &amp; \rightarrow Integer|Apply|Identify|...|{(}  {Expr} {)} \\\\
  Integer &amp; \rightarrow... \\\\
...\\\\
 Apply &amp; \rightarrow  Factor  (  Exprs  )
\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:6.849999999999999em;"></span><span class="strut bottom" style="height:13.2em;vertical-align:-6.35em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-6.009999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span><span style="top:-4.809999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:-3.609999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span></span></span><span style="top:-2.409999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:-1.209999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span><span style="top:-0.009999999999997733em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:1.1900000000000024em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span><span style="top:2.390000000000002em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:3.590000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span></span></span><span style="top:4.79em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:5.989999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">A</span><span class="mord mathit">p</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-6.009999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">→</span><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span></span></span><span style="top:-3.6099999999999985em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">→</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span></span></span><span style="top:-1.2099999999999989em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">→</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathrm">∣</span><span class="mord mathit">A</span><span class="mord mathit">p</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">∣</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">∣</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">∣</span><span class="mord displaystyle textstyle uncramped"><span class="mopen">(</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span><span class="mord displaystyle textstyle uncramped"><span class="mclose">)</span></span></span></span><span style="top:1.1900000000000015em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">→</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span></span></span><span style="top:5.989999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">→</span><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></span></span></span>
<p>显然，non-terminal <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi>p</mi><mi>p</mi><mi>l</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">Apply</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mord mathit">p</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span> 的派生最左端会进入  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">Factor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span> ，之后又会回到 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi>p</mi><mi>p</mi><mi>l</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">Apply</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mord mathit">p</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span> 。教科书式的左递归。</p>
        
          <div class="more-link">
            <a href="/2017/03/03/使用-Parsec-处理左递归/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/08/24/Call-With-Current-Continuation-Coroutine/">Call With Current Continuation: Coroutine</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-08-24T14:33:53.000Z" itemprop="datePublished">
    2016-08-24
  </time>
  
</div>

    </header>
    <div>
      
        <p>通过嵌套 <code>call/cc</code> 可以方便的实现协程</p>
<figure class="highlight"><table><tr><td class="code"><pre><div class="line">(define (coroutine routine)</div><div class="line">  (let ((current routine)</div><div class="line">        (status 'suspended))</div><div class="line">    (lambda args</div><div class="line">      (cond ((null? args) </div><div class="line">             (if (eq? status 'dead)</div><div class="line">                 (error 'dead-coroutine)</div><div class="line">                 (let ((continuation-and-value</div><div class="line">                        (call/cc (lambda (return)</div><div class="line">                                   (let ((returner</div><div class="line">                                          (lambda (value)</div><div class="line">                                            (call/cc (lambda (next)</div><div class="line">                                                       (return (cons next value)))))))</div><div class="line">                                     (current returner)</div><div class="line">                                     (set! status 'dead))))))</div><div class="line">                   (if (pair? continuation-and-value)</div><div class="line">                       (begin (set! current (car continuation-and-value))</div><div class="line">                              (cdr continuation-and-value))</div><div class="line">                       continuation-and-value))))</div><div class="line">            ((eq? (car args) 'status?) status)</div><div class="line">            ((eq? (car args) 'dead?) (eq? status 'dead))</div><div class="line">            ((eq? (car args) 'alive?) (not (eq? status 'dead)))</div><div class="line">            ((eq? (car args) 'kill!) (set! status 'dead))</div><div class="line">            (true nil)))))</div></pre></td></tr></table></figure>
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/08/01/Write-You-a-Scheme/">Write You a Scheme</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-08-01T01:33:57.000Z" itemprop="datePublished">
    2016-08-01
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/haskell/">haskell</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/scheme/">scheme</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/interpreter/">interpreter</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/lambda-calculus/">lambda calculus</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>撸了个 <a href="https://github.com/nameoverflow/LittleScheme">Scheme 解释器</a>，也算是拿 Haskell 做过东西了（虽然只是个玩具</p>
<p>最大的体会就是，既熟悉了 Haskell，也巩固了 Scheme （虽然看过 SICP 但是并不是很明白它的 quosiquote 和 call/cc 之类的鬼东西</p>
<p>本来是打算自己定义一门语言（像<a href="https://hcyue.me/article/56eb92c6d09a19dd0956c469">这个</a>），但是发现挺麻烦的（大雾），而且我比较关心的也是解释执行的过程，于是还是决定把 Scheme 实现一下。大体上是跟着 <a href="https://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours">Write Yourself a Scheme in 48 Hours</a> 来的，在它的基础上增加了 Continuation 之类的玩意儿</p>
        
          <div class="more-link">
            <a href="/2016/08/01/Write-You-a-Scheme/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/05/14/什么是函数式编程思维/">什么是函数式编程思维？</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-05-14T06:00:30.000Z" itemprop="datePublished">
    2016-05-14
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/functional-programming/">functional programming</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>我为什么要把我的知乎回答搬到这里呢……大概是太久没发东西了来凑数吧。</p>
<p>作者：nameoverflow</p>
<p>链接：<a href="https://www.zhihu.com/question/28292740/answer/100284611" target="_blank" rel="external">https://www.zhihu.com/question/28292740/answer/100284611</a></p>
<p>来源：知乎</p>
<p>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<p>函数式编程与命令式编程最大的不同其实在于：</p>
<p><strong>函数式编程关心数据的映射，命令式编程关心解决问题的步骤</strong></p>
<p>这里的映射就是数学上“函数”的概念——一种东西和另一种东西之间的对应关系。</p>
<p>这也是为什么“函数式编程”叫做“函数式编程”。</p>
<p>这是什么意思呢？</p>
<p>假如，现在你来到 google 面试，面试官让你把二叉树镜像反转一下（大雾</p>
<p>几乎不假思索的，就可以写出这样的 Python 代码：</p>
<pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">invertTree</span><span class="params">(root)</span>:</span>
    <span class="keyword">if</span> root <span class="keyword">is</span> <span class="keyword">None</span>:
        <span class="keyword">return</span> <span class="keyword">None</span>
    <span class="keyword">if</span> root.left:
        invertTree(root.left)
    <span class="keyword">if</span> root.right:
        invertTree(root.right)
    root.left, root.right = root.right, root.left
    <span class="keyword">return</span> root
</code></pre>
<p>好了，现在停下来看看这段代码究竟代表着什么——</p>
<p>它的含义是：首先判断节点是否为空；然后翻转左树；然后翻转右树；最后左右互换。</p>
<p>这就是命令式编程——你要做什么事情，你得把达到目的的步骤详细的描述出来，然后交给机器去运行。</p>
<p>这也正是命令式编程的理论模型——图灵机的特点。一条写满数据的纸带，一条根据纸带内容运动的机器，机器每动一步都需要纸带上写着如何达到。</p>
<p>那么，不用这种方式，如何翻转二叉树呢？</p>
<p>函数式思维提供了另一种思维的途径——</p>
<p>所谓“翻转二叉树”，可以看做是要得到一颗和原来二叉树对称的新二叉树。</p>
<p>这颗新二叉树的特点是每一个节点都递归地和原树相反。</p>
<p>用 haskell 代码表达出来就是：</p>
<pre><code class="haskell"><span class="class"><span class="keyword">data</span> <span class="type">Tree</span> a = <span class="type">Node</span> a (<span class="type">Maybe</span> (<span class="type">Tree</span> <span class="title">a</span>)) (<span class="type">Maybe</span> (<span class="type">Tree</span> <span class="title">a</span>))</span>
            <span class="keyword">deriving</span> (<span class="type">Show</span>, <span class="type">Eq</span>)

<span class="title">invert</span> :: <span class="type">Maybe</span> (<span class="type">Tree</span> a) -&gt; <span class="type">Maybe</span> (<span class="type">Tree</span> a)
<span class="title">invert</span> <span class="type">Nothing</span> = <span class="type">Nothing</span>
<span class="title">invert</span> (<span class="type">Just</span> <span class="type">Node</span> v l r) = <span class="type">Just</span> (<span class="type">Node</span> v (invert r) (invert l))
</code></pre>
<p>（防止看不懂，翻译成等价的 python ）</p>
<pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">invert</span><span class="params">(node)</span>:</span>
    <span class="keyword">if</span> node <span class="keyword">is</span> <span class="keyword">None</span>:
        <span class="keyword">return</span> <span class="keyword">None</span>
    <span class="keyword">else</span>
        <span class="keyword">return</span> Tree(node.value, invert(node.right), invert(node.left))
</code></pre>
<p>这段代码体现的思维，就是旧树到新树的映射——对一颗二叉树而言，它的镜像树就是左右节点递归镜像的树。</p>
<p>这段代码最终达到的目的同样是翻转二叉树，但是它得到结果的方式和 python 代码有着本质的差别：通过描述一个 旧树-&gt;新树 的映射，而不是描述“从旧树得到新树应该怎样做”来达到目的。</p>
<p>那么这样思考有什么好处呢？</p>
<p>首先，最直观的角度来说，函数式风格的代码可以写得很精简，大大减少了键盘的损耗（</p>
<p>更重要的是，函数式的代码是“对映射的描述”，它不仅可以描述二叉树这样的数据结构之间的对应关系，任何能在计算机中体现的东西之间的对应关系都可以描述——比如函数和函数之间的映射（比如 functor）；比如外部操作到 GUI 之间的映射（就是现在前端热炒的所谓 FRP）。它的抽象程度可以很高，这就意味着函数式的代码可以更方便的复用。</p>
<p>同时，将代码写成这种样子可以方便用数学的方法进行研究（这就是为什么可以扯上“___范畴上的___”这种数学上的高深概念）</p>
<p>至于什么科里化、什么数据不可变，都只是外延体现而已。</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/05/14/Let-s-Encrypt/">Let&#39;s Encrypt!</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-05-14T05:40:54.000Z" itemprop="datePublished">
    2016-05-14
  </time>
  
</div>

    </header>
    <div>
      
        <blockquote>
<p>世界因自由软件而美好。</p>
</blockquote>
<p>昨天（5月13日）发现 SSL 证书到期了。想起之前谭总说过的 Let’s Encrypt，决定体验一下。</p>
<p>相比起<a href="https://tms.im/tms/letsencrypt-beta" target="_blank" rel="external">半年前</a>，这玩意完善了很多、傻瓜了很多。</p>
<p>全程需要做的只需要 clone 一个<a href="https://github.com/certbot/certbot" target="_blank" rel="external">傻瓜工具包</a>，然后运行一行命令</p>
<pre><code class="bash">./certbot-auto certonly --standalone --email admin@hcyue.me <span class="_">-d</span> hcyue.me
</code></pre>
<p>之后坐等几秒，SSL 验证所需要的全部证书就都被放在了 <code>/etc/letsencrypt/live/hcyue.me/</code></p>
<p>然后把 nginx 配置对应的项目修改为生成的 pem 即可。</p>
<p><img src="https://dn-hcyue.qbox.me/img%2FS60514-133728.jpg" alt=""></p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/05/08/Haskeller-的-PureScript-试水/">Haskeller 的 PureScript 试水</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-05-07T16:21:33.000Z" itemprop="datePublished">
    2016-05-08
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/haskell/">haskell</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/purescript/">purescript</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/functional-programming/">functional programming</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>– 讲道理虽然自称 Haskeller ，但是其实我根本不会 Haskell（</p>
<blockquote>
<p>为什么我要尝试 PureScript ？</p>
<p>因为它是 Haskell 和 JavaScript 生的娃啊。</p>
</blockquote>
<p>Facebook 的 React.js 可以说是给 JavaScript 社区带来了一次 functional programming 的热潮。然而 JavaScript 毕竟不是真正的函数式编程语言——虽然有着 closure 等特性让它可以支持这种独特的范式，但是整体而言它还是基于顺序指令和事件回调的语言。</p>
<p>PureScript 是一门年轻的语言——现在在 github 上可以查到的最早提交来自于 30 Sep 2013 。它致力于创造一种“类似 haskell 的编程体验”和“生成可读的 JavaScript 代码”。于是，有了它，我们终于可以在项目前端部分中愉快的写“ monoid in the category of endofunctors of X, with product × replaced by composition of endofunctors and unit set by the identity endofunctor ”了（</p>
        
          <div class="more-link">
            <a href="/2016/05/08/Haskeller-的-PureScript-试水/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/03/27/又是一篇lambda演算介绍-过程与数据结构-一/">又是一篇lambda演算介绍：过程与数据结构（一）</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-03-27T08:30:54.000Z" itemprop="datePublished">
    2016-03-27
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/computer-science/">computer science</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/lambda-calculus/">lambda calculus</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <h2 id="λ-calculus"><a href="#λ-calculus" class="headerlink" title="λ-calculus"></a>λ-calculus</h2><blockquote>
<p>自从了解了lambda演算，我就觉得，每个写代码的人都应该学学它。——沃兹·基硕德</p>
</blockquote>
<p>λ演算的详细介绍可以从 <a href="https://zh.wikipedia.org/wiki/%CE%9B%E6%BC%94%E7%AE%97">Wikipedia</a> 找到。</p>
<p>简单来说，这是一个比图灵机早提出几个月的可计算性模型，表达优美形式简洁反正比图灵机高到不知道哪里去了，但是愚蠢的人类没办法在机器上直接实现它所以只能照着图灵机来造计算机，导致图灵那家伙小人得志真正的大神却退居二线（相对图灵来说的二线）</p>
<p>（为了方便表示，以下将 <code>λV.E</code> 记为 <code>V -&gt; E</code> ）</p>
<h2 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h2><p>在原始的 lambda 演算中，没有直接的“数字”概念。</p>
<p>lambda 演算的全部规则仅有两条（其实也可以说是三条），在这种简洁的体系中没有一个容纳原生“数字”概念的空间。</p>
<p>但是神奇的是，仅仅只有两条“运算方法”，却能够构造出整个直觉上的“数字”体系。这种通过“过程”构造的“数字”，我们叫它“Church Numerals”，因为它正是由引入 lambda 演算的那位神人提出的。</p>
        
          <div class="more-link">
            <a href="/2016/03/27/又是一篇lambda演算介绍-过程与数据结构-一/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/03/21/找到了一个炒鸡好的-MacType-配置/">找到了一个炒鸡好的 MacType 配置</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-03-21T14:27:42.000Z" itemprop="datePublished">
    2016-03-21
  </time>
  
</div>

    </header>
    <div>
      
        <p>穷逼买不起 mac 但是受不了 windows 的辣鸡字体渲染，只能自己动手丰衣足食。</p>
<p>效果图：</p>
<p><img src="https://dn-hcyue.qbox.me/img%2FQQ%E6%88%AA%E5%9B%BE20160321222022.png" alt=""></p>
<p><a href="https://github.com/renkun-ken/MacType.Decency" target="_blank" rel="external">原配置</a> 是我从<a href="https://www.zhihu.com/question/22425454/answer/21930065" target="_blank" rel="external">知乎这个回答</a>上扒的。但是他用到了很多魔改字体然而我懒得装，于是 <code>fork</code> 了一份把魔改字体都删了嗯。</p>
<p>所以修改版<a href="https://github.com/nameoverflow/MacType.Decency" target="_blank" rel="external">在这</a></p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/03/15/重构半衰期/">重构半衰期</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-03-15T05:41:01.000Z" itemprop="datePublished">
    2016-03-15
  </time>
  
</div>

    </header>
    <div>
      
        <p>所谓“重构半衰期”，就是“写一段代码，在时间T之后你会觉得这一段代码写得像坨 shit ”中 T 的最小值。</p>
<p>之所以突然想到这个概念，是因为我发现，现在的我看几个月之前的文章简直就是羞耻 play ：</p>
<p><a href="/article/56462b7f149b44851f0e03a7">*大综合楼，一跃解千愁</a></p>
<p><a href="/article/561d28e92da1ec4753e8a5b6">Haskell 练习</a></p>
<p><a href="/article/5606d46dc8cf12e30db29d49">记一次离散作业</a></p>
<p>第一、二篇，就算不说每次都写一遍的 <code>replicate</code>，那两级 <code>where</code> 就足够让人迷醉，更不用说当时完全不知道用 <code>monad</code> ， 甚至 <code>lambda</code></p>
<p>第三篇简直令人发指，双手颤抖的想要毁尸灭迹——当然最后被理智所制止。</p>
<p>根据马克思主义“自我否定，螺旋上升”的事物发展理论，这个 min(T) 可以代表你的学习进展。之所以会觉得之前的东西是 shit 正是因为现在的水平和当初已经不是同一层面。</p>
<p>想通了这点，我便心安理得的继续写着 shit 一样的代码了。</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/03/13/OOM-Killer-大爆炸/">OOM Killer 大爆炸</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-03-13T06:04:55.000Z" itemprop="datePublished">
    2016-03-13
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/linux/">linux</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>讲道理把 OOM killer 设成 2 居然会把整个系统搞挂……</p>
<p><img src="https://dn-hcyue.qbox.me/img/QQ%E6%88%AA%E5%9B%BE20160313134747.png" alt="enter image description here"></p>
<p>于是整个 OS 的内存管理全部挂掉，能用的命令只有 <code>echo</code> </p>
<p>还好是可以以文件的形式强行修改服务进程的。</p>
<pre><code class="bash"><span class="built_in">echo</span> 0 &gt; /proc/sys/vm/overcommit_memory
</code></pre>
<p>然后试了试 <code>ls</code> ，终于能够运行。</p>
<p>一激动之下多按了几个↑，然后……</p>
<p><img src="https://dn-hcyue.qbox.me/img/QQ%E6%88%AA%E5%9B%BE20160313135140.png" alt="enter image description here"></p>
<p>……………………………………</p>

      
    </div>
</article>

    </li>
  
</ul>

  <section id="nav-wrapper">
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">next »</a>
    </nav>
  </section>


            <footer>
    <div>© 2016 - Hcyue</div>
    <div>
    Powered by Hexo, all rights reserved
    </div>
</footer>

        </div>
    </div>
</div>
<script src="/js/pager/dist/singlepager.js"></script>
<script>
var sp = new Pager('data-pager-shell')

</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>